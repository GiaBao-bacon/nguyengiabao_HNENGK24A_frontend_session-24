<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let arr = [];
      let choice;
      do {
        choice = +prompt(
          "MENU\n" +
            "1. Nhập vào mảng 2 chiều\n" +
            "2. Hiển thị mảng\n" +
            "3. Tổng các phần tử\n" +
            "4. Tổng đường chéo chính\n" +
            "5. Tổng đường chéo phụ\n" +
            "6. Trung bình cộng 1 hàng hoặc 1 cột\n" +
            "7. Thoát\n" +
            "Lựa chọn của bạn: "
        );

        switch (choice) {
          case 1:
            let n = +prompt("Nhập số hàng");
            let m = +prompt("Nhập số cột");
            arr = [];
            for (let i = 0; i < n; i++) {
              arr[i] = [];
              for (let j = 0; j < m; j++) {
                arr[i][j] = +prompt(`array[${i}][${j}]`);
              }
            }
            break;

          case 2:
            if (arr.length === 0) {
              console.log("Mảng rỗng!");
            } else {
              for (const element of arr) {
                console.log(element);
              }
            }
            break;

          case 3:
            let sum = 0;
            for (const parents of arr) {
              for (const childs of parents) {
                sum += childs;
              }
            }
            console.log(`Tổng các phần tử: ${sum}`);
            break;

          case 4:
            if (arr.length === 0 || arr.length !== arr[0].length) {
              console.log(
                "Mảng không phải hình vuông, không tính được đường chéo chính."
              );
              break;
            }
            let sumMain = 0;
            for (let i = 0; i < arr.length; i++) {
              sumMain += arr[i][i];
            }
            console.log(`Tổng đường chéo chính là: ${sumMain}`);
            break;

          case 5:
            if (arr.length === 0 || arr.length !== arr[0].length) {
              console.log(
                "Mảng không phải hình vuông, không tính được đường chéo phụ."
              );
              break;
            }
            let sumSub = 0;
            let lastCol = arr[0].length - 1;
            for (let i = 0; i < arr.length; i++) {
              sumSub += arr[i][lastCol - i];
            }
            console.log(`Tổng đường chéo phụ là: ${sumSub}`);
            break;

          case 6:
            if (arr.length === 0) {
              console.log("Mảng rỗng!");
              break;
            }

            let option = prompt(
              "Nhập 'h' để tính trung bình cộng hàng, 'c' để tính trung bình cộng cột"
            );
            if (option === "h") {
              let rowIndex = +prompt(`Chọn hàng thứ (1 đến ${arr.length}):`);
              if (rowIndex < 1 || rowIndex > arr.length) {
                console.log("Hàng không hợp lệ!");
                break;
              }

              let totalRow = arr[rowIndex - 1].length;
              let sumRow = 0;
              for (const element of arr[rowIndex - 1]) {
                sumRow += element;
              }
              let avgRow = sumRow / totalRow;
              console.log(`Trung bình cộng hàng ${rowIndex}: ${avgRow}`);
            } else if (option === "c") {
              let colIndex = +prompt(`Chọn cột thứ (1 đến ${arr[0].length}):`);
              if (colIndex < 1 || colIndex > arr[0].length) {
                console.log("Cột không hợp lệ!");
                break;
              }

              let sumCol = 0;
              for (let i = 0; i < arr.length; i++) {
                sumCol += arr[i][colIndex - 1];
              }
              let avgCol = sumCol / arr.length;
              console.log(`Trung bình cộng cột ${colIndex}: ${avgCol}`);
            } else {
              console.log("Lựa chọn không hợp lệ!");
            }
            break;

          case 7:
            console.log("Thoát chương trình!");
            break;

          default:
            alert("Không hợp lệ");
            break;
        }
      } while (choice !== 7);
    </script>
  </body>
</html>
